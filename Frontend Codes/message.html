<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkillSwap Messaging</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0a1a2f] text-white min-h-screen flex flex-col md:flex-row">

<!-- Sidebar -->
<aside class="md:w-1/3 bg-[#132C4A] p-5 border-r border-orange-400/30 flex-shrink-0">
  <h1 class="text-2xl font-bold text-orange-400 mb-5">Messages</h1>
  <input id="searchChat" type="text" placeholder="Search messages..." class="w-full mb-5 px-4 py-2 rounded-lg bg-[#0F2238] text-sm focus:ring-2 focus:ring-orange-500 outline-none">

  <div id="chatList" class="space-y-3">
    <!-- Chats dynamically populated -->
  </div>
</aside>

<!-- Chat Window -->
<main class="flex-1 flex flex-col bg-[#0F2136]">
  <!-- Chat Header -->
  <div class="flex items-center justify-between p-5 bg-[#12273F] border-b border-gray-700">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 bg-orange-500 rounded-full"></div>
      <div>
        <p id="chatHeaderName" class="font-bold text-xl text-orange-300">Select a chat</p>
        <p class="text-gray-400 text-sm">SkillSwap</p>
      </div>
    </div>
    <div class="flex items-center gap-4 text-gray-300 text-xl">
      <span id="deleteThread" class="hover:text-red-400 cursor-pointer">üóëÔ∏è</span>
      <span id="reportThread" class="hover:text-red-400 cursor-pointer">üö´</span>
    </div>
  </div>

  <!-- Messages -->
  <div id="chatWindow" class="flex-1 p-5 overflow-y-auto space-y-4 relative">

    <!-- Demo messages will appear here -->
  </div>

  
  

  <!-- Typing Indicator -->
  <div id="typingIndicator" class="hidden px-5 pb-2 text-gray-400 text-sm italic">Mohsin is typing...</div>
  <!-- Messages -->
    <div class="flex-1 p-5 overflow-y-auto space-y-4">
      <!-- Received -->
      <div class="flex items-start gap-3">
        <div class="w-10 h-10 bg-gray-500 rounded-full"></div>
        <div class="bg-[#1B335B] p-3 rounded-xl shadow max-w-xs text-sm">
          Hi Mohsin! I'm Nishat, offering JavaScript lessons for photography tips ‚Äî interested?
          <p class="text-gray-400 text-xs mt-1">06:50 PM</p>
        </div>
      </div>
      <!-- Sent -->
      <div class="flex items-start gap-3 justify-end">
        <div class="bg-orange-500 p-3 rounded-xl shadow max-w-xs text-sm">
          Hi Nishat! Great idea. How about Tuesday, 7 PM?
          <p class="text-black text-xs mt-1">06:55 PM</p>
        </div>
      </div>
      <!-- Received -->
      <div class="flex items-start gap-3">
        <div class="w-10 h-10 bg-gray-500 rounded-full"></div>
        <div class="bg-[#1B335B] p-3 rounded-xl shadow max-w-xs text-sm">
          Works for me. I'll share a coding link.
          <p class="text-gray-400 text-xs mt-1">06:56 PM</p>
        </div>
      </div>
      <!-- Starred -->
      <div class="flex items-start gap-3 justify-end">
        <div class="bg-orange-600 p-3 rounded-xl shadow border border-yellow-300 max-w-xs text-sm">
          Confirmed, 7 PM Tuesday, with a photo demo ‚≠ê
          <p class="text-black text-xs mt-1">07:00 PM</p>
        </div>
      </div>
    </div>
  <!-- Message Input -->
  <div class="p-4 bg-[#12273F] flex items-center gap-3 border-t border-gray-700">
    <input id="messageInput" type="text" placeholder="Type a message..." class="flex-1 px-4 py-2 rounded-lg bg-[#1B2F4B] text-sm focus:ring-2 focus:ring-orange-500 outline-none">
    <button id="sendBtn" class="px-5 py-2 bg-orange-500 hover:bg-orange-600 transition rounded-lg font-semibold">Send</button>
  </div>

  
</main>



<!-- Notification Toast -->
<div id="toast" class="hidden fixed bottom-6 right-6 bg-orange-500 text-black px-4 py-2 rounded-xl shadow-xl animate-pulse">
  üîî New message
</div>

<!-- Report Modal -->
<div id="reportModal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center">
  <div class="bg-[#132C4A] p-6 rounded-2xl w-80 shadow-xl text-center">
    <h2 class="text-xl font-bold text-orange-400 mb-3">Report / Block</h2>
    <p class="text-gray-300 mb-5">Are you sure you want to report this user?</p>
    <button id="confirmReport" class="px-5 py-2 bg-red-500 hover:bg-red-600 rounded-lg font-semibold mr-3">Yes</button>
    <button id="cancelReport" class="px-5 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold">No</button>
  </div>

  
</div>


<script>
  const chats = [
    {
      id: 1,
      name: "Mohsin",
      messages: [
        { text: "Hi Nishat! Great idea. How about Tuesday, 7 PM?", type: "received", time: "06:55 PM", starred: false },
        { text: "Works for me. I'll share a coding link.", type: "sent", time: "06:56 PM", starred: false },
        { text: "Confirmed, 7 PM Tuesday, with a photo demo ‚≠ê", type: "received", time: "07:00 PM", starred: true },
      ]
    },
    {
      id: 2,
      name: "Maria",
      messages: [
        { text: "Send money for lessons!", type: "received", time: "07:10 PM", starred: false }
      ]
    }
  ];

  const chatList = document.getElementById("chatList");
  const chatWindow = document.getElementById("chatWindow");
  const chatHeaderName = document.getElementById("chatHeaderName");
  const messageInput = document.getElementById("messageInput");
  const sendBtn = document.getElementById("sendBtn");
  const toast = document.getElementById("toast");
  const typingIndicator = document.getElementById("typingIndicator");
  const reportModal = document.getElementById("reportModal");
  const confirmReport = document.getElementById("confirmReport");
  const cancelReport = document.getElementById("cancelReport");
  const deleteThreadBtn = document.getElementById("deleteThread");
  const reportThreadBtn = document.getElementById("reportThread");

  let currentChat = null;

  // Render chat list
  function renderChatList() {
    chatList.innerHTML = "";
    chats.forEach(chat => {
      const div = document.createElement("div");
      div.className = "flex items-center justify-between p-3 bg-[#112943] rounded-xl hover:bg-[#1A365C] cursor-pointer transition";
      div.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 ${chat.id===2 ? 'bg-orange-500/50' : 'bg-orange-500'} rounded-full"></div>
          <div>
            <p class="font-semibold text-orange-300">${chat.name}</p>
            <p class="text-gray-300 text-sm truncate">${chat.messages[chat.messages.length-1].text}</p>
          </div>
        </div>
        <span class="${chat.messages.some(m => m.starred)? 'text-yellow-400' : ''}">‚≠ê</span>
      `;
      div.addEventListener("click", () => openChat(chat.id));
      chatList.appendChild(div);
    });
  }

  // Open a chat
  function openChat(chatId) {
    currentChat = chats.find(c => c.id === chatId);
    chatHeaderName.textContent = currentChat.name;
    renderMessages();
  }

  // Render messages
  function renderMessages() {
    chatWindow.innerHTML = "";
    currentChat.messages.forEach(msg => {
      const div = document.createElement("div");
      div.className = "max-w-xs p-3 rounded-xl shadow text-sm";
      div.classList.add(msg.type==="sent" ? "bg-orange-500 ml-auto text-black" : "bg-[#1B335B] text-white");
      div.innerHTML = `<p>${msg.text}${msg.starred ? " ‚≠ê" : ""}</p><p class="text-xs mt-1 ${msg.type==="sent" ? 'text-black' : 'text-gray-400'}">${msg.time}</p>`;
      chatWindow.appendChild(div);
    });
    chatWindow.scrollTop = chatWindow.scrollHeight;
  }

  // Send message
  sendBtn.addEventListener("click", () => {
    if(currentChat && messageInput.value.trim() !== "") {
      const newMsg = { 
        text: messageInput.value, 
        type: "sent", 
        time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}), 
        starred: false 
      };
      currentChat.messages.push(newMsg);
      renderMessages();
      messageInput.value = "";

      // Show demo typing indicator
      typingIndicator.classList.remove("hidden");
      setTimeout(() => {
        typingIndicator.classList.add("hidden");
        // Simulate a received reply
        const replyMsg = { text: "Got it! Thanks!", type: "received", time: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}), starred: false };
        currentChat.messages.push(replyMsg);
        renderMessages();
        showToast("New message from " + currentChat.name);
      }, 2000);
    }
  });

  // Show toast
  function showToast(text) {
    toast.textContent = `üîî ${text}`;
    toast.classList.remove("hidden");
    setTimeout(()=>toast.classList.add("hidden"), 3000);
  }

  // Delete thread
  deleteThreadBtn.addEventListener("click", () => {
    if(currentChat) {
      const index = chats.findIndex(c => c.id===currentChat.id);
      if(index !== -1) {
        chats.splice(index, 1);
        currentChat = null;
        chatWindow.innerHTML = "<p class='text-gray-400 text-center'>No chat selected</p>";
        chatHeaderName.textContent = "Select a chat";
        renderChatList();
      }
    }
  });

  // Report / Block
  reportThreadBtn.addEventListener("click", () => reportModal.classList.remove("hidden"));
  cancelReport.addEventListener("click", () => reportModal.classList.add("hidden"));
  confirmReport.addEventListener("click", () => {
    reportModal.classList.add("hidden");
    showToast("User reported!");
  });

  renderChatList();
  openChat(1); // Load first demo chat
</script>
</body>
</html>
